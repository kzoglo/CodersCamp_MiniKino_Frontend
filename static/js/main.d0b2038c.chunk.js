(this.webpackJsonpcoderscamp_minikino_frontend=this.webpackJsonpcoderscamp_minikino_frontend||[]).push([[0],Array(27).concat([function(e,t,n){},,,,function(e,t,n){e.exports=n(71)},,,,,,,,,,function(e,t,n){},,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(28),o=n.n(i),s=n(11),c=n(4),l=n(5),u=n(7),p=n(6),m=n(14),f=function(e,t){return setTimeout(e,t)},d=function(e){return window.localStorage.getItem(e)},v=function(e,t){window.localStorage.setItem(e,t)},h=function(){window.localStorage.clear()},w=n(16),g=n(17),b=n(18),R="invisible",E="visible",k="show",y="hide",N=function(){window.scrollTo({top:0,bahavior:"smooth"})},S=function(e,t){t instanceof Array||(t=[t]),t.forEach((function(t){e.classList.add(t)}))},j=function(e,t){t instanceof Array||(t=[t]),t.forEach((function(t){e.classList.remove(t)}))},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];j(e,t),S(e,n)},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=k,r=y,i=E,o=R;x(e,[r,o].concat(Object(b.a)(t)),[a,i].concat(Object(b.a)(n)))},O=function(e){x(e,[k,E],[y,R])},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.setAttribute("disabled",!0),x(e,n,t)},C=function(e,t,n){e.removeAttribute("disabled",!0),x(e,n,t)},z=(n(41),"hide"),W="show",L="grid",M="cursor-pointer",P="submitBtn",A=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).formatCountdown=function(){var e=Math.round(a.state.time/1e3),t=Math.floor(e/60),n=e-60*t,r=n>9?n:"0".concat(n);return"".concat(t,":").concat(r)},a.countdownAutologout=function(){var e=setInterval((function(){a.setState((function(e){return{time:e.time-1e3}}))}),1e3);v("intervalId",e)},a.cancelInterval=function(){clearInterval(d("intervalId"))},a.closeWindow=function(){var e=z,t=L;a.cancelInterval(),x(a.wrapperRef.current,t,e)},a.renewSession=function(){var e=z,t=W;a.cancelInterval(),x(a.redirectWrapperRef.current,e,t),S(a.renewWrapperRef.current,e)},a.agreeToRenew=function(){a.closeWindow(),clearTimeout(d("autoLogoutTimerId")),clearTimeout(d("autoLogoutReminderTimerId")),h(),a.props.history.push("/Login")},a.state={time:d("expiresIn")-Date.now()},a.wrapperRef=r.a.createRef(),a.redirectWrapperRef=r.a.createRef(),a.renewWrapperRef=r.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.countdownAutologout()}},{key:"render",value:function(){var e=L,t=z,n=P,a=M;return r.a.createElement("div",{className:"autoLogoutReminder-wrapper ".concat(e),ref:this.wrapperRef},r.a.createElement("div",{className:"autoLogoutReminder-reminder-wrapper",ref:this.renewWrapperRef},r.a.createElement("div",{className:"autoLogoutReminder-reminder-innerWrapper"},r.a.createElement("div",{className:"autoLogoutReminder-reminder-content"},r.a.createElement("p",{className:"autoLogoutReminder-reminder-text"},"Za ".concat(this.formatCountdown()," min. ").concat(this.props.renewSessionText)),r.a.createElement("button",{className:"".concat(n," ").concat(a),onClick:this.renewSession},this.props.renewSessionBtn)),r.a.createElement(w.a,{icon:g.b,onClick:this.closeWindow}))),r.a.createElement("div",{className:"autoLogoutReminder-redirect-wrapper ".concat(t),ref:this.redirectWrapperRef},r.a.createElement("div",{className:"autoLogoutReminder-redirect-innerWrapper"},r.a.createElement("p",null,this.props.redirectToLoginText),r.a.createElement("div",{className:"autoLogoutReminder-btns-wrapper"},r.a.createElement("button",{className:"".concat(n," ").concat(a),onClick:this.agreeToRenew},this.props.agreeToRenewBtn),r.a.createElement("button",{className:"".concat(n," ").concat(a),onClick:this.closeWindow},this.props.cancelRenewBtn)))))}}]),n}(a.Component);A.defaultProps={renewSessionText:"zostaniesz wylogowany.",redirectToLoginText:"Teraz zostaniesz wylogowany i przeniesiony do strony logowania.",renewSessionBtn:"Odn\xf3w sesj\u0119",agreeToRenewBtn:"Kontynuuj",cancelRenewBtn:"Przerwij"};var _=Object(m.e)(A),D=function(e,t){return t>e},B=function(e,t){return t<=e},F=function(e,t){return e===t},V=n(1),U=n.n(V),Z=n(3),K=function(e,t){e.push({pathname:"/servererror",state:{err:t}})},H=200,J=201,G=400,Y=401,q=403,$=404,Q=409,X=422,ee=500,te="B\u0142\u0105d serwera. Spr\xf3buj ponownie p\xf3\u017aniej.",ne="Przepraszamy, miejsce zosta\u0142o ju\u017c zarezerwowane. Od\u015bwie\u017c stron\u0119 i spr\xf3buj ponownie.",ae="Wprowadzono dane w niedozwolonym formacie.",re="Nieprawid\u0142owy email lub has\u0142o.",ie="Taki u\u017cytkownik ju\u017c istnieje.",oe="Niepoprawne \u017c\u0105danie. Spr\xf3buj ponownie p\xf3\u017aniej.",se="Nie masz dost\u0119pu do \u017c\u0105danego zasobu.",ce="Nie znaleziono \u017c\u0105danego zasobu.",le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{concurrentReserv:!1},n=function(e,t){var n=new Error(e);throw n.statusCode=t,n},a=H,r=J,i=G,o=Y,s=q,c=$,l=Q,u=X,p=ee,m=oe,f=re,d=se,v=ne,h=ce,w=ie,g=ae,b=te;switch(e){case a:case r:break;case i:n(m,i);break;case o:n(f,o);break;case s:n(d,s);break;case c:t.concurrentReserv?n(v,c):n(h,c);break;case l:n(w,l);break;case u:n(g,u);break;case p:n(b,p);break;default:n(b,p)}},ue="https://mini-kino.herokuapp.com/",pe=function(){var e=Object(Z.a)(U.a.mark((function e(t){var n,a,r,i,o,s,c,l,u;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.path,a=t.body,r=void 0===a?null:a,i=t.contentType,o=void 0===i?"application/json":i,s=t.method,c=void 0===s?"GET":s,l=t.authToken,u=void 0===l?"":l,e.next=3,fetch("".concat(ue).concat(n),{method:c,headers:{"Access-Control-Allow-Origin":"*","Content-Type":o,Authorization:"Bearer ".concat(u)},body:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=(n(45),function(e){var t=e.loadingText;return r.a.createElement("div",{className:"loading-wrapper"},r.a.createElement("div",null,t),r.a.createElement("div",{className:"loadingDots-outerWrapper"},r.a.createElement("div",{className:"loadingDots-wrapper"},r.a.createElement("div",null," ")," ",r.a.createElement("div",null," ")," ",r.a.createElement("div",null," ")," ",r.a.createElement("div",null," ")," ",r.a.createElement("div",null," "))))});me.defaultProps={loadingText:"Wczytywanie"};var fe=me,de=(n(46),function(e){var t=e.src,n=e.alt,a=e.available,i=e.classes,o=r.a.createElement("img",{className:"".concat(i," moviePoster-poster"),src:t,alt:n});return F(a,!0)||F(a,!1)?r.a.createElement("div",{className:"moviePoster-wrapper"},o,r.a.createElement("span",{className:"".concat(F(a,!0)?"moviePoster-available":"moviePoster-unavailable"," moviePoster-availability")},"".concat(F(a,!0)?"Dost\u0119pny":"Niedost\u0119pny"))):F(a,void 0)?r.a.createElement("div",{className:"moviePoster-wrapper"},o):void 0});de.defaultProps={classes:""};var ve=de,he=(n(47),function(e){var t=e.imageUrl,n=e._id,a=e.title,i=e.available;return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{to:"".concat(mt,"/reservation"),className:"movieLinkWithTitle-wrapper",onClick:function(){return v("movieId",n)}},r.a.createElement(ve,{src:"".concat(ue).concat(t),alt:a,available:i}),r.a.createElement("p",{className:"movieLinkWithTitle-title","data-movie-id":n},a)))}),we=(n(48),function(e){var t=e.title,n=e.movies;return r.a.createElement("div",{className:"moviesGroup-wrapper"},r.a.createElement("h1",{className:"moviesGroup-title"},t),r.a.createElement("div",{className:"moviesGroup-list"},function(e){return e.map((function(e,t){var n=e.imageUrl,a=e.title,i=e._id,o=e.available;return r.a.createElement(he,{key:t,imageUrl:n,title:a,available:o,_id:i})}))}(n)))}),ge=(n(49),function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).ageOfNewFMovie=2,a.classifyMovies=function(e){var t=[],n=[];return e.forEach((function(e){var r=(new Date).getFullYear()-a.ageOfNewFMovie;B(e.year,r)?t.push(e):n.push(e)})),{newMovies:t,recommendedMovies:n}},a.state={movies:[],recommendedMovies:[],newMovies:[],screenings:[],availableScreenings:[],unavailableScreenings:[]},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(Z.a)(U.a.mark((function e(){var t,n,a,r,i,o,s,c,l,u;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(),e.prev=1,e.next=4,pe({path:"api/movie"});case 4:return t=e.sent,le(t.status),e.next=8,t.json();case 8:return n=e.sent,e.next=11,this.getScreenings();case 11:a=e.sent,r=this.classifyMovies(n),i=r.newMovies,o=r.recommendedMovies,s=this.checkAvailability(n,a),c=s.available,l=s.unavailable,u=this.addAvailability(c,l,n),this.setState({movies:u,recommendedMovies:o,newMovies:i}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),K(this.props.history,e.t0);case 21:case"end":return e.stop()}}),e,this,[[1,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"getScreenings",value:function(){var e=Object(Z.a)(U.a.mark((function e(){var t,n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe({path:"api/screening"});case 2:return t=e.sent,le(t.status),e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"checkAvailability",value:function(e,t){var n=[],a=[];return e.forEach((function(e){t.forEach((function(t){F(e._id,t.movie_id)?n.includes(e._id)||n.push(e._id):a.includes(e._id)||a.push(e._id)}))})),n.forEach((function(e){a.forEach((function(t,n){F(e,t)&&delete a[n]}))})),{available:n,unavailable:a}}},{key:"addAvailability",value:function(e,t,n){var a=[],r=[],i=Object(b.a)(n);return i.forEach((function(t){e.forEach((function(e){F(t._id,e)&&(t.available=!0,a.push(t))}))})),t.forEach((function(e){i.forEach((function(t){r.includes(t)||F(t._id,e)&&(t.available=!1,r.push(t))}))})),[].concat(r,a)}},{key:"render",value:function(){return F(this.state.recommendedMovies.length,0)?r.a.createElement(fe,null):r.a.createElement("div",{className:"homepage-wrapper"},r.a.createElement("img",{className:"homepage-img",src:"img/jumanji.png",alt:"Home"}),r.a.createElement(we,{title:"POLECANE FILMY",movies:this.state.recommendedMovies}),r.a.createElement(we,{title:"NOWE FILMY",movies:this.state.newMovies}))}}]),n}(a.Component));console.log();var be=ge,Re=(n(50),function(e){var t=e.iconSemanticUI,n=e.header,a=e.content,i=a.main,o=a.secondary,s=e.communication,c=s.way,l=s.resource,u=e.wrapperClass,p=e.iconClass,m=e.titleClass,f=e.textsClass;return r.a.createElement("div",{className:"contactWay-wrapper ".concat(u)},r.a.createElement("i",{className:"".concat(t," contactWay-icon ").concat(p)}),r.a.createElement("h1",{className:"contactWay-title ".concat(m)},n),r.a.createElement("div",{className:"contactWay-texts ".concat(f)},r.a.createElement("p",null,i),r.a.createElement("p",null,o),r.a.createElement("p",null,c," ",r.a.createElement("span",null,l))))});Re.defaultProps={iconSemanticUI:"envelope outline icon",header:"Napisz do nas e-mail",content:{main:"Masz pytanie?",secondary:"Napisz do nas, a na pewno si\u0119 z Tob\u0105 skontaktujemy"},communication:{way:"e-mail:",resource:"minikino@gmail.com"},wrapperClass:"",iconClass:"",titleClass:"",textsClass:""};var Ee=Re,ke=(n(51),function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).getVariables=function(){var e=a.wrapperRef.current;return{finalWidthOfWindow:800,childrenNum:e.children.length,wrapper:e}},a.changeToOneColumn=function(e){e.style="grid-template-columns: auto"},a.changeToMultiColumn=function(e,t){t.style="grid-template-columns: repeat(".concat(e,",").concat(100/e,"%)")},a.handleResize=function(){var e=a.getVariables(),t=e.finalWidthOfWindow,n=e.childrenNum,r=e.wrapper;a.setState({windowWidth:window.innerWidth},(function(){B(t,a.state.windowWidth)?a.changeToOneColumn(r):a.changeToMultiColumn(n,r)}))},a.state={count:0,windowWidth:window.innerWidth},a.wrapperRef=r.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.getVariables(),t=e.finalWidthOfWindow,n=e.childrenNum,a=e.wrapper,r=window.innerWidth;B(t,r)?this.changeToOneColumn(a):this.changeToMultiColumn(n,a),window.addEventListener("resize",this.handleResize),N()}},{key:"shouldComponentUpdate",value:function(e,t){var n,a,r=this.getVariables().finalWidthOfWindow;return!!F(this.state.windowWidth,t.windowWidth)||!!(n=D,a=B,function(e,t,r){return n(e,t)&&a(e,r)||n(t,e)&&a(r,e)})(r,this.state.windowWidth,t.windowWidth)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){return r.a.createElement("div",{className:"contactUs-wrapper",ref:this.wrapperRef},r.a.createElement(Ee,null),r.a.createElement(Ee,{iconSemanticUI:"phone volume icon",header:"Zadzwo\u0144 do nas na infolini\u0119",content:{main:"Masz pytanie?",secondary:"Nasi fachowcy czekaj\u0105 na Twoje pytania codziennie od 10:00 do 21:00"},communication:{way:"tel",resource:"+48 666 66 66 66 66"}}))}}]),n}(r.a.Component)),ye=n(13),Ne=(n(52),function(e){var t=e.outerWrapper,n=e.spinnerWrapper,a=e.spinner,i=e.reference;return r.a.createElement("div",{className:"loadingSpinner-outerWrapper ".concat(t)},r.a.createElement("div",{ref:i,className:"loadingSpinner-wrapper hide ".concat(n)},r.a.createElement("div",{className:"loadingSpinner-spinner ".concat(a)})))});Ne.defaultProps={reference:"",outerWrapper:"",spinnerWrapper:"",spinner:""};var Se=Ne,je=(n(53),function(e){var t=e.moduleName,n=e.title,a=e.formValue,i=e.validationVal,o=e.type,s=e.name,c=e.placeholder,l=e.inputRef,u=e.minlength,p=void 0===u?3:u,m=e.maxlength,f=void 0===m?20:m,d=e.required,v=void 0===d||d,h=e.onClick,w=e.onChange,g=e.onBlur;return r.a.createElement("div",{className:"field ".concat(t,"-").concat(s,"-wrapper")},r.a.createElement("label",{className:"formInput-label",htmlFor:s},n),r.a.createElement("input",{id:s,className:"formInput-input neutral-input",placeholder:c,name:s,type:o,ref:l,value:a,minLength:p,maxLength:f,required:v,onChange:w,onClick:h,onBlur:g}),r.a.createElement("p",{className:"validation-p"},i))}),xe=(n(54),function(e){var t=e.classes,n=e.btnText,a=e.reference,i=e.children;return r.a.createElement("button",{className:"submitBtn ".concat(t),type:"submit",ref:a},n,i)});xe.defaultProps={classes:"",btnText:"Wy\u015blij"};n(55);var Ie="invalid",Oe="valid",Te="neutral-input",Ce="invalid-input",ze="cursor-auto",We="cursor-pointer",Le=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).renderInputs=function(){return[{title:"Imi\u0119",name:"firstName",placeholder:"min. 3 znaki",formValue:a.state.firstName,type:"text",inputRef:a.firstNameRef,validationMsg:a.state.validationMsgFirstName,validationMsgName:"validationMsgFirstName"},{title:"Nazwisko",name:"lastName",placeholder:"min. 3 znaki",formValue:a.state.lastName,type:"text",inputRef:a.lastNameRef,validationMsg:a.state.validationMsgLastName,validationMsgName:"validationMsgLastName"},{title:"Email",name:"email",placeholder:"email",formValue:a.state.email,type:"email",minlength:6,maxlength:40,inputRef:a.emailRef,validationMsg:a.state.validationMsgEmail,validationMsgName:"validationMsgEmail"},{title:"Has\u0142o",name:"pass",placeholder:"min. 8 znak\xf3w",formValue:a.state.pass,type:"password",minlength:8,inputRef:a.passRef,validationMsg:a.state.validationMsgPass,validationMsgName:"validationMsgPass"},{title:"Potwierd\u017a has\u0142o",name:"confirmPass",placeholder:"min. 8 znak\xf3w",formValue:a.state.confirmPass,type:"password",minlength:8,inputRef:a.confirmPassRef,validationMsg:a.state.validationMsgConfirmPass,validationMsgName:"validationMsgConfirmPass"}].map((function(e){var t=e.title,n=e.name,i=e.formValue,o=e.type,s=e.placeholder,c=e.minlength,l=void 0===c?3:c,u=e.maxlength,p=e.inputRef,m=e.validationMsg,f=e.validationMsgName;return r.a.createElement(je,{moduleName:"register",key:t,title:t,name:n,placeholder:s,formValue:i,validationVal:m,type:o,minlength:l,maxlength:u,inputRef:p,onChange:function(){return a.handleInputChange(n,p.current.value)},onBlur:function(){return a.validateInput(t,p.current,l,f)}})}))},a.negativeValidation=function(e,t,n){a.setState(Object(ye.a)({},n,t));var r=Te,i=Ce;e.replace(r,i)},a.positiveValidation=function(e,t){a.setState(Object(ye.a)({},t,""));var n=Te,r=Ce;e.replace(r,n)},a.validateInput=function(e,t,n,r){var i,o=t.name,s=t.value,c=t.classList;if(F(o,"email"))/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(s)?a.positiveValidation(c,r):(i="Niepoprawny email.",a.negativeValidation(c,i,r));else if(F(o,"lastName"))/(^[A-Za-\u017c][']?[A-Z]?[a-\u017c]+[-|\s]?[A-Za-\u017c]+$)/.test(s)?a.positiveValidation(c,r):(i='"'.concat(e,'" nie mo\u017ce zawiera\u0107 liczb oraz znak\xf3w specjalnych.'),a.negativeValidation(c,i,r));else if(D(s.length,n)){var l=F(n,3)?"znaki":"znak\xf3w";i='"'.concat(e,'" musi mie\u0107 co najmniej ').concat(n," ").concat(l,"."),a.negativeValidation(c,i,r)}else!function(e){return!/^[A-\u017b]?[a-\u017c]*$/.test(e)}(s)?a.positiveValidation(c,r):(i='"'.concat(e,'" nie mo\u017ce zawiera\u0107 liczb oraz znak\xf3w specjalnych.'),a.negativeValidation(c,i,r))},a.validatePass=function(){if(!F(a.state.pass,a.state.confirmPass)){var e="Has\u0142a musz\u0105 by\u0107 jednakowe!";throw a.setState({afterSubmitInfo:e},(function(){f((function(){a.setState({afterSubmitInfo:""})}),1e3)})),new Error(e)}},a.validateRegisterInfo=function(e,t){var n=Oe,r=Ie,i=a.validateRegisterInfoRef.current,o=!0;F(e,201)||F(e,200)?(a.setState({afterSubmitInfo:"Zarejestrowano"}),i.classList.replace(r,n)):(a.setState({afterSubmitInfo:t}),o=!1),f((function(){a.setState({afterSubmitInfo:""}),i.classList.replace(n,r),a.dispatchToLogin(o)}),1e3)},a.checksDataEntirety=function(){if(![a.state.validationMsgConfirmPass,a.state.validationMsgEmail,a.state.validationMsgFirstName,a.state.validationMsgLastName,a.state.validationMsgPass].every((function(e){return F(e,"")}))){var e="Uzupe\u0142nij dane!";throw a.setState({afterSubmitInfo:e},(function(){f((function(){a.setState({afterSubmitInfo:""})}),1e3)})),new Error(e)}},a.dispatchToLogin=function(e){e&&!d("userId")&&a.props.history.push("/login")},a.endRegister=function(){var e=ze,t=We;O(a.registerSpinnerRef.current),C(a.registerBtnRef.current,[t],[e])},a.handleInputChange=function(e,t){a.setState(Object(ye.a)({},e,t))},a.handleSubmit=function(){var e=Object(Z.a)(U.a.mark((function e(t){var n,r,i,o,s,c,l;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=ze,r=We,T(a.registerBtnRef.current,[n],[r]),I(a.registerSpinnerRef.current),e.prev=4,a.checksDataEntirety(),a.validatePass(),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),a.endRegister(),e.abrupt("return");case 13:return e.prev=13,i={name:a.state.firstName,surname:a.state.lastName,email:a.state.email,password:a.state.pass,confirmPassword:a.state.confirmPass},e.next=17,pe({path:"api/user",body:JSON.stringify(i),method:"POST"});case 17:o=e.sent,s=o.status,le(s),a.endRegister(),a.validateRegisterInfo(s),e.next=30;break;case 24:e.prev=24,e.t1=e.catch(13),c=e.t1.statusCode,l=e.t1.message,a.endRegister(),a.validateRegisterInfo(c,l);case 30:case"end":return e.stop()}}),e,null,[[4,9],[13,24]])})));return function(t){return e.apply(this,arguments)}}(),a.state={firstName:"",lastName:"",email:"",pass:"",confirmPass:"",afterSubmitInfo:"",validationMsgFirstName:"",validationMsgLastName:"",validationMsgEmail:"",validationMsgPass:"",validationMsgConfirmPass:"",areInputsValidatedCorrectyle:!1},a.firstNameRef=r.a.createRef(),a.lastNameRef=r.a.createRef(),a.emailRef=r.a.createRef(),a.passRef=r.a.createRef(),a.confirmPassRef=r.a.createRef(),a.validateRegisterInfoRef=r.a.createRef(),a.registerSpinnerRef=r.a.createRef(),a.registerBtnRef=r.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.firstNameRef.current.focus()}},{key:"render",value:function(){return r.a.createElement("div",{className:"register-outerWrapper"},r.a.createElement("div",{className:"register-wrapper"},r.a.createElement("h1",{className:"register-title"},"Rejestracja"),r.a.createElement("form",{className:"register-form",onSubmit:this.handleSubmit,ref:this.registerFormRef},this.renderInputs(),r.a.createElement(xe,{classes:"registerBtn cursor-pointer",btnText:"Zarejestruj",reference:this.registerBtnRef},r.a.createElement(Se,{reference:this.registerSpinnerRef,outerWrapper:"registerSpinner-outerWrapper",spinner:"registerSpinner"})),r.a.createElement("p",{ref:this.validateRegisterInfoRef,className:"validate-register-info ".concat(Ie)},this.state.afterSubmitInfo))))}}]),n}(a.Component),Me=(n(56),function(e){var t=e.logInText;return N(),r.a.createElement("div",{className:"logInNeeded"},t)});Me.defaultProps={logInText:"Musisz si\u0119 zalogowa\u0107!"};n(57);var Pe={cursorPointer:"cursor-pointer",cursorAuto:"cursor-auto"},Ae=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).renderLoginInputs=function(){return[{title:"E-mail",name:"email",formValue:a.state.email,type:"email",reference:a.emailRef},{title:"Has\u0142o",name:"pass",formValue:a.state.pass,type:"password",reference:a.passRef}].map((function(e,t){var n=e.title,i=e.name,o=e.formValue,s=e.type,c=e.reference;return r.a.createElement(je,{moduleName:"login",key:t,title:n,type:s,name:i,formValue:o,inputRef:c,onChange:function(e){return a.handleInputChange(i,e.target.value)}})}))},a.endLogin=function(){var e=Pe.cursorAuto,t=Pe.cusorPointer;O(a.loginSpinnerRef.current),C(a.loginBtnRef.current,[t],[e])},a.handleAutoLogout=function(e){var t=f((function(){e&&a.props.history.push("/autologout")}),e-Date.now());v("autoLogoutTimerId",t)},a.handleInputChange=function(e,t){a.setState(Object(ye.a)({},e,t))},a.handleSubmit=function(){var e=Object(Z.a)(U.a.mark((function e(t){var n,r,i,o,s,c,l,u,p;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=Pe.cursorAuto,r=Pe.cusorPointer,T(a.loginBtnRef.current,[n],[r]),I(a.loginSpinnerRef.current),i={email:a.state.email,password:a.state.pass},e.prev=5,e.next=8,pe({path:"api/login",body:JSON.stringify(i),method:"POST"});case 8:return o=e.sent,le(o.status),e.next=12,o.json();case 12:s=e.sent,c=s.token,l=s.userId,u=s.expiresIn,a.endLogin(),v("userId",l),v("token",c),v("expiresIn",Date.now()+u),a.handleAutoLogout(d("expiresIn")),a.props.history.push("/"),e.next=29;break;case 24:e.prev=24,e.t0=e.catch(5),p=e.t0.message,a.endLogin(),a.setState({afterSubmitInfo:p},(function(){f((function(){a.setState({afterSubmitInfo:""})}),1e3)}));case 29:case"end":return e.stop()}}),e,null,[[5,24]])})));return function(t){return e.apply(this,arguments)}}(),a.state={firstName:"",lastName:"",email:"",pass:"",afterSubmitInfo:"",autoLogoutTimerId:"",isLoggedIn:!1},a.emailRef=r.a.createRef(),a.passRef=r.a.createRef(),a.validateLoginInfoRef=r.a.createRef(),a.loginSpinnerRef=r.a.createRef(),a.loginBtnRef=r.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;d("userId")?(this.setState({isLoggedIn:!0}),f((function(){e.props.history.goBack()}),1e3),clearTimeout(d("autoLogoutTimerId")),clearTimeout(d("autoLogoutReminderTimerId")),h()):this.emailRef.current.focus()}},{key:"render",value:function(){if(this.state.isLoggedIn)return r.a.createElement(Me,{logInText:"Wylogowano prawid\u0142owo."});var e=Pe.cursorPointer;return r.a.createElement("div",{className:"login-outerWrapper"},r.a.createElement("div",{className:"login-wrapper"},r.a.createElement("h1",{className:"login-title"},this.props.title),r.a.createElement("form",{className:"login-form",onSubmit:this.handleSubmit},this.renderLoginInputs(),r.a.createElement(xe,{classes:"loginBtn ".concat(e),btnText:"Zaloguj",reference:this.loginBtnRef},r.a.createElement(Se,{reference:this.loginSpinnerRef,outerWrapper:"login-spinner-outerWrapper",spinner:"login-spinner"})),r.a.createElement("p",{ref:this.validateLoginInfoRef,className:"validate-login-info invalid"},this.state.afterSubmitInfo))))}}]),n}(a.Component);Ae.defaultProps={title:"Zaloguj"};var _e=Ae,De=(n(58),function(e){return D(30,e.length)?"".concat(e.slice(0,30)).concat("..."):e}),Be=function(e){var t=e.movie,n=t.description,a=t.title,i=e.titleClass,o=e.descriptionClass,s=e.descrSpanClass,c=e.tooltipTextClass,l=r.a.createRef(),u=r.a.createRef();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"".concat(i," movieInfo-title")},a),r.a.createElement("p",{className:"".concat(o," movieInfo-description movieInfo-tooltip"),onClick:function(){return function(e,t,n,a){F(e.innerText.length,function(e){return 30+e.length}("..."))?(e.innerText=a,t.innerText="Zwi\u0144 opis"):(e.innerText=n,t.innerText="Rozwi\u0144 opis")}(l.current,u.current,De(n),n)}},r.a.createElement("span",null,"Opis: "),r.a.createElement("span",{className:"".concat(s," movieInfo-descrSpan"),ref:l},De(n)),r.a.createElement("span",{className:"".concat(c," movieInfo-tooltipText"),ref:u},"Rozwi\u0144 opis")))};Be.defaultProps={titleClass:"",descriptionClass:"",descrSpanClass:"",tooltipTextClass:""};var Fe=Be,Ve=function(e){return new Date(e).toLocaleString(void 0,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},Ue=function(){var e=Object(Z.a)(U.a.mark((function e(t,n){var a,r,i,o,s;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe({path:"api/seat/".concat(t),authToken:d("token")});case 3:return a=e.sent,le(a.status),e.next=7,a.json();case 7:return r=e.sent,i=[],o=0,s=[],r.forEach((function(e){var t=e.row,n=e.seatNumber;F(o,t)||s.includes(t)?i.forEach((function(e){F(e.row,t)&&e.seats.push(n)})):(o=t,s.push(t),i.push({row:t,seats:[n]}))})),i.sort((function(e,t){return e.row-t.row})).map((function(e){return{row:e.row,seats:e.seats.sort((function(e,t){return e-t}))}})),e.abrupt("return",i);case 16:e.prev=16,e.t0=e.catch(0),K(n,e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}(),Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){var t=e.seat_id;return{row:t.row,seats:t.seatNumber}}))},Ke=(n(59),function(e){var t=e.seat,n=e.screening,a=e.timeClass,i=e.seatClass,o=e.wrapperClass;return F(t,null)?null:r.a.createElement("div",{className:"".concat(o," screeningInfo-wrapper")},r.a.createElement("p",{className:"".concat(a," screeningInfo-time")},r.a.createElement("span",null,"Godzina: ")," ",Ve(n.time)),r.a.createElement("p",{className:"".concat(i," screeningInfo-seat")},r.a.createElement("span",null,"Sala: "),t.room_id.name,r.a.createElement("span",null,", Rz\u0105d: "),t.row,r.a.createElement("span",null,", Miejsce: "),t.seatNumber))});Ke.defaultProps={timeClass:"",seatClass:"",wrapperClass:""};var He=Ke,Je=function(e){var t=e.reservations,n=e.noTicketsText;return r.a.createElement("div",{className:"myTickets-wrapper"},function(e,t){return D(0,e.length)?e.map((function(e){var t=e.screening_id,n=e.seat_id,a=e._id,i=t.movie_id,o=i.imageUrl,s=i.title,c=i.description;return r.a.createElement("div",{className:"myTickets-innerWrapper",key:a},r.a.createElement(ve,{src:"".concat(ue).concat(o),alt:s}),r.a.createElement("div",{className:"myTickets-utils"},r.a.createElement(Fe,{movie:{description:c,title:s}}),r.a.createElement(He,{seat:n,screening:t})))})):r.a.createElement("div",{className:"myTickets-noTickets"},t)}(t,n))};Je.defaultProps={noTicketsText:"Brak bilet\xf3w do wy\u015bwietlenia"};n(27);var Ge=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).renderTickets=function(e){var t=e.user_id,n=e.reservations;return F(t,"")||F(t,null)?(setTimeout((function(){a.props.history.push("/login")}),1e3),r.a.createElement(Me,null)):F(n,null)?r.a.createElement(fe,null):r.a.createElement("div",{className:"myTickets-outerWrapper"},r.a.createElement(Je,{reservations:n}))},a.state={user_id:d("userId"),reservations:null},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(Z.a)(U.a.mark((function e(){var t,n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F(this.state.user_id,"")||F(this.state.user_id,null)){e.next=15;break}return e.prev=1,e.next=4,pe({path:"api/reservation/".concat(this.state.user_id,"/none"),authToken:d("token")});case 4:return t=e.sent,le(t.status),e.next=8,t.json();case 8:n=e.sent,this.setState({reservations:n}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),K(this.props.history,e.t0);case 15:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.renderTickets(this.state,this.props)}}]),n}(a.Component),Ye=(n(60),function(e){var t=e.title,n=e.prices,a=e.titleClass,i=e.tableClass,o=e.rowClass;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"priceList-title ".concat(a)},t),r.a.createElement("table",{className:"priceList-table ".concat(i)},r.a.createElement("tbody",null,function(e,t){return e.map((function(e,n){return r.a.createElement("tr",{className:"priceList-row ".concat(t),key:n},e)}))}(function(e){var t=[];for(var n in e)t.push(e[n].map((function(e,t){return r.a.createElement("td",{key:t},e)})));return t}(n),o))))});Ye.defaultProps={titleClass:"",tableClass:"",rowClass:""};var qe=Ye,$e={twoD:{openDays:["","Poniedzia\u0142ek","Wtorek-Pi\u0105tek","Weekend"],normalTicket:["Bilet normalny","15 z\u0142","21 z\u0142","25z\u0142"],kidPupilTicket:["Dzieci\u0119cy i Studencki","10z\u0142","16z\u0142","16z\u0142"],senior:["Emeryci","12z\u0142","17z\u0142","18z\u0142"]},threeD:{openDays:["","Poniedzia\u0142ek","Wtorek-Pi\u0105tek","Weekend"],normalTicket:["Bilet normalny","25 z\u0142","28 z\u0142","30z\u0142"],kidPupilTicket:["Dzieci\u0119cy i Studencki","18z\u0142","20z\u0142","22z\u0142"],senior:["Emeryci","20z\u0142","22z\u0142","26z\u0142"]}},Qe=(n(61),function(e){return r.a.createElement("div",{className:"prices-wrapper"},r.a.createElement("div",{className:"prices-content"},r.a.createElement("h1",{className:"prices-title"},"Ceny bilet\xf3w"),r.a.createElement(qe,{prices:$e.twoD,title:"FILMY 2D"}),r.a.createElement(qe,{prices:$e.threeD,title:"FILMY 3D"})))}),Xe=(n(62),function(e){return function(e){var t=e._id,n=e.imageUrl,a=e.title,i=e.description;return r.a.createElement("div",{className:"movie-wrapper",key:t},r.a.createElement(ve,{src:"".concat(ue).concat(n),alt:a}),r.a.createElement("div",{className:"movie-utils"},r.a.createElement(Fe,{movie:{description:i,title:a}})))}(e.movie)}),et=n(19),tt=(n(63),function(e,t,n,a,i){return function(e){return!e.every((function(e){return F(e,void 0)}))}(t)?r.a.createElement(r.a.Fragment,null,r.a.createElement("option",null,e),t.map((function(e,t){return r.a.createElement("option",{key:t,value:a(e)},n(e))}))):r.a.createElement("option",null,i)}),nt=function(e){var t=e.selectNameProp,n=e.classes,a=e.labelTextProp,i=e.spinnerComp,o=e.optionTitleProp,s=e.dataArr,c=e.optionContentFunc,l=e.optionValueFunc,u=e.fallbackValueProp,p=e.handlerFunc,m=e.reference;return r.a.createElement("label",null,r.a.createElement("div",{style:{display:"inline"}},a),i,r.a.createElement("select",{name:t,className:n,ref:m,onChange:p},tt(o,s,c,l,u)))};nt.defaultProps={classes:"",fallbackValueProp:"Brak dost\u0119pnych termin\xf3w"};var at=nt,rt="invalidSubmit",it="validSubmit",ot="cursor-auto",st="cursor-pointer",ct=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).setAnyState=function(e,t){var n=Object.assign({},Object(et.a)({},a.state),e);a.setState(n,t)},a.setRowsList=function(){return a.state.rowsWithSeats.map((function(e){var t=e.row;if(!e.seats.every((function(e){return F(e,null)})))return t})).filter((function(e){return e}))},a.checkAvailableSeats=function(){var e=Object(Z.a)(U.a.mark((function e(t){var n,r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe({path:"api/reservation/none/".concat(a.state.screening_id),authToken:d("token")});case 3:return r=e.sent,le(r.status),e.next=7,r.json();case 7:n=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),K(a.props.history,e.t0);case 13:a.setAnyState({takenSeats:Ze(n)},Object(Z.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.calculateFreeSeats();case 2:t();case 3:case"end":return e.stop()}}),e)}))));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),a.getScreeningData=Object(Z.a)(U.a.mark((function e(){var t,n,r,i;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F(a.state.screening_id,null)){e.next=20;break}return I(a.loadingSpinnerRef.current),e.prev=2,e.next=5,pe({path:"api/screening/".concat(a.state.movie_id,"/").concat(a.state.screening_id),authToken:d("token")});case 5:return n=e.sent,le(n.status),e.next=9,n.json();case 9:t=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),K(a.props.history,e.t0);case 15:r=function(){a.setAnyState(Object(et.a)({},{choosenRow:null,choosenSeat:null,freeSeats:[],rowsList:[]}),(function(){a.setAnyState({room:t.room_id.name,rowsList:a.setRowsList()},(function(){O(a.loadingSpinnerRef.current)}))}))},i=t.room_id._id,a.setAnyState({room_id:i},Object(Z.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.checkAvailableSeats(r);case 2:case"end":return e.stop()}}),e)})))),e.next=21;break;case 20:a.setAnyState(Object(et.a)(Object(et.a)({},{choosenRow:null,choosenSeat:null,freeSeats:[],rowsList:[]}),{},{room:"",room_id:""}));case 21:case"end":return e.stop()}}),e,null,[[2,12]])}))),a.afterReservationUserInfo=function(e,t,n,r){I(e,t,n),f((function(){a.setAnyState({afterSubmitInfo:""},(function(){O(e),a.enableReservation()}))}),r)},a.checkReservationAttempt=function(e,t,n,r,i){a.setAnyState({afterSubmitInfo:e},(function(){a.afterReservationUserInfo(t,n,r,i)}))},a.calculateFreeSeats=Object(Z.a)(U.a.mark((function e(){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(a.state.room_id,a.props.history);case 2:(t=e.sent).forEach((function(e,n){var r=e.row,i=e.seats;a.state.takenSeats.forEach((function(e){var a=e.row,o=e.seats;F(a,r)&&i.forEach((function(e){F(e,o)&&delete t[n].seats[t[n].seats.indexOf(e)]}))}))})),a.setAnyState({rowsWithSeats:t},(function(){a.setState({rowsList:a.setRowsList()})}));case 5:case"end":return e.stop()}}),e)}))),a.checkConcurrentReservation=Object(Z.a)(U.a.mark((function e(){var t,n,r,i,o;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe({path:"api/reservation/none/".concat(a.state.screening_id),authToken:d("token")});case 3:return n=e.sent,le(n.status),e.next=7,n.json();case 7:t=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),K(a.props.history,e.t0);case 13:return r=Ze(t),i={row:a.state.choosenRow,seats:a.state.choosenSeat},o=r.some((function(e){return F(e.row,i.row)&&F(e.seats,i.seats)})),e.abrupt("return",o);case 17:case"end":return e.stop()}}),e,null,[[0,10]])}))),a.reservationServerError=function(e){var t=it,n=rt;a.checkReservationAttempt(e.message,a.afterSubmitInfoRef.current,[t],[n],3e3)},a.makeNewReservation=Object(Z.a)(U.a.mark((function e(){var t,n,r,i,o,s;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.checkConcurrentReservation();case 3:if(!e.sent){e.next=5;break}le(404,{concurrentReserv:!0});case 5:return t={user_id:a.state.user_id,seat_id:a.state.seat_id,screening_id:a.state.screening_id},e.next=8,pe({path:"api/reservation/",authToken:d("token"),method:"POST",body:JSON.stringify(t)});case 8:n=e.sent,r=n.status,le(r),i=it,o=rt,a.checkReservationAttempt("Zarezerwowano",a.afterSubmitInfoRef.current,[o],[i],3e3),s=function(){var e=a.state.rowsWithSeats[a.state.choosenRow-1].seats;a.setAnyState({freeSeats:e,choosenSeat:null},(function(){a.state.freeSeats.every((function(e){return F(e,null)}))&&a.handleRowOptionChange(),a.enableReservation()}))},a.checkAvailableSeats(s),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),a.reservationServerError(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])}))),a.enableReservation=function(){var e=ot,t=st;O(a.reservationSpinnerRef.current),C(a.reservationBtnRef.current,[t],[e])},a.handleDateOptionChange=function(){var e=Object(Z.a)(U.a.mark((function e(t){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.persist(),n=F(a.selectDateRef.current.value,"Data i godzina")?null:a.selectDateRef.current.value,a.setAnyState({screening_id:n,afterSubmitInfo:""},Object(Z.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.getScreeningData();case 1:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleRowOptionChange=function(){var e,t=Number(a.selectRowRef.current.value);F(t.toString(),"NaN")?(t=null,e=[]):e=a.state.rowsWithSeats[t-1].seats,a.setAnyState({freeSeats:[]},(function(){a.setAnyState({freeSeats:e,choosenRow:t,choosenSeat:null,afterSubmitInfo:""})}))},a.handleSeatOptionChange=function(e){var t=Number(a.selectSeatRef.current.value);a.setAnyState({choosenSeat:t,afterSubmitInfo:""})},a.handleSubmit=function(){var e=Object(Z.a)(U.a.mark((function e(t){var n,r,i,o,s,c,l;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(F(a.state.choosenRow,null)||F(a.state.choosenSeat,null)||F(a.state.screening_id,null))){e.next=6;break}n=it,r=rt,a.checkReservationAttempt("Musisz dokona\u0107 wyboru",a.afterSubmitInfoRef.current,[n],[r],1500),e.next=24;break;case 6:return i=ot,o=st,T(a.reservationBtnRef.current,[i],[o]),I(a.reservationSpinnerRef.current),e.prev=9,e.next=12,pe({path:"api/seat/".concat(a.state.room_id,"/").concat(a.state.choosenRow,"/").concat(a.state.choosenSeat),authToken:d("token")});case 12:return s=e.sent,le(s.status),e.next=16,s.json();case 16:c=e.sent,l=c._id,a.setAnyState({seat_id:l},a.makeNewReservation),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),a.reservationServerError(e.t0);case 24:case"end":return e.stop()}}),e,null,[[9,21]])})));return function(t){return e.apply(this,arguments)}}(),a.state={movie_id:null,user_id:a.props.user_id,screenings:[],screening_id:null,room:"",room_id:null,rowsList:[],rowsWithSeats:[],immutableRows:[],reservationDone:!1,takenSeats:[],freeSeats:[],choosenRow:null,choosenSeat:null,seat_id:"",afterSubmitInfo:"",reservation:{}},a.selectDateRef=r.a.createRef(),a.selectRowRef=r.a.createRef(),a.selectSeatRef=r.a.createRef(),a.afterSubmitInfoRef=r.a.createRef(),a.loadingSpinnerRef=r.a.createRef(),a.reservationSpinnerRef=r.a.createRef(),a.reservationBtnRef=r.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(Z.a)(U.a.mark((function e(){var t,n,a=this;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(this.loadingSpinnerRef.current),e.prev=1,e.next=4,pe({path:"api/screening/".concat(this.props.movie_id,"/").concat(this.props.screening_id),authToken:d("token")});case 4:return n=e.sent,le(n.status),e.next=8,n.json();case 8:t=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),K(this.props.history,e.t0);case 14:this.setAnyState({screenings:t},(function(){O(a.loadingSpinnerRef.current)}));case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"buyTicket-wrapper"},r.a.createElement(at,{classes:"data-select",labelTextProp:"Wybierz dat\u0119 seansu:",optionTitleProp:"Data i godzina",spinnerComp:r.a.createElement(Se,{reference:this.loadingSpinnerRef}),dataArr:this.state.screenings,optionContentFunc:function(e){return Ve(e.time)},optionValueFunc:function(e){return e._id},handlerFunc:this.handleDateOptionChange,reference:this.selectDateRef}),r.a.createElement("label",null,"Sala: ",this.state.room),r.a.createElement(at,{selectNameProp:"row",classes:"row-select",labelTextProp:"Rz\u0105d:",optionTitleProp:"Wybierz rz\u0105d",dataArr:this.state.rowsList,optionContentFunc:function(e){return e},optionValueFunc:function(e){return e},handlerFunc:this.handleRowOptionChange,reference:this.selectRowRef}),r.a.createElement(at,{selectNameProp:"seat",classes:"seat-select",labelTextProp:"Miejsce:",optionTitleProp:"Wybierz miejsce",dataArr:this.state.freeSeats,optionContentFunc:function(e){return e},optionValueFunc:function(e){return e},handlerFunc:this.handleSeatOptionChange,reference:this.selectSeatRef}),r.a.createElement(xe,{btnText:"Zarezerwuj",classes:"reservationBtn ".concat(st),reference:this.reservationBtnRef},r.a.createElement(Se,{reference:this.reservationSpinnerRef,outerWrapper:"reservSpinner-outerWrapper",spinner:"reservSpinner"})),r.a.createElement("p",{className:"afterSubmit invisible",ref:this.afterSubmitInfoRef},this.state.afterSubmitInfo)))}}]),n}(a.Component),lt=(n(64),function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).renderReservation=function(){return F(a.state.user_id,"")||F(a.state.user_id,null)?(setTimeout((function(){a.props.history.push("/login")}),1e3),r.a.createElement(Me,null)):F(a.state.movie,null)?r.a.createElement(fe,null):r.a.createElement("div",{className:"reservation-outerWrapper"},r.a.createElement("div",{className:"reservation-wrapper",ref:a.wrapperRef},r.a.createElement("div",{className:"reservation-itemWrapper"},r.a.createElement(Xe,{movie:a.state.movie})),r.a.createElement("div",{className:"reservation-itemWrapper"},r.a.createElement(ct,{history:a.props.history,movie_id:a.state.movie_id,user_id:a.state.user_id}))))},a.state={user_id:d("userId"),movie_id:"",movie:null},a.wrapperRef=r.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(Z.a)(U.a.mark((function e(){var t,n,a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d("movieId"),F(this.state.user_id,"")||F(this.state.user_id,null)){e.next=16;break}return e.prev=2,e.next=5,pe({path:"api/movie/".concat(t),authToken:d("token")});case 5:return n=e.sent,le(n.status),e.next=9,n.json();case 9:a=e.sent,this.setState({movie_id:t,movie:a}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),K(this.props.history,e.t0);case 16:case"end":return e.stop()}}),e,this,[[2,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){N()}},{key:"render",value:function(){return this.renderReservation()}}]),n}(a.Component)),ut=(n(65),function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={errMsg:"",errCode:0},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){if(N(),this.props.history.location.state){var e=this.props.history.location.state.err,t=e.message,n=e.statusCode;this.setState({errMsg:t,errCode:F(n,void 0)?500:n})}else this.setState({errMsg:"Wyst\u0105pi\u0142 b\u0142\u0105d. Spr\xf3buj ponownie p\xf3\u017aniej.",errCode:500})}},{key:"render",value:function(){return r.a.createElement("div",{className:"serverError-outerWrapper"},r.a.createElement("div",{className:"serverError-wrapper"},r.a.createElement("h1",null,"Error ".concat(this.state.errCode)),r.a.createElement("h2",null,"".concat(this.state.errMsg))))}}]),n}(r.a.PureComponent)),pt=(n(66),function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){N(),clearInterval(d("intervalId")),h()}},{key:"render",value:function(){return r.a.createElement("div",{className:"autologout-wrapper"},r.a.createElement("h1",{className:"autologout-info"},this.props.infoText))}}]),n}(r.a.Component));pt.defaultProps={infoText:"Zosta\u0142e\u015b automatycznie wylogowany."};var mt="",ft=[{path:"/",component:be},{path:"/contact",component:ke},{path:"/register",component:Le},{path:"/login",component:_e},{path:"/mytickets",component:Ge},{path:"/prices",component:Qe},{path:"/reservation",component:lt},{path:"/servererror",component:ut},{path:"/autologout",component:pt}].map((function(e){var t=e.path,n=e.component;return{path:"".concat(mt).concat(t),exact:!0,component:n}})),dt=[{to:"".concat(mt,"/"),content:"Oferta",name:"Homepage"},{to:"".concat(mt,"/prices"),content:"Cennik",name:"PriceList"},{to:"".concat(mt,"/mytickets"),content:"Moje bilety",name:"MyTickets"},{to:"".concat(mt,"/register"),content:"Rejestracja",name:"Register"},{to:"".concat(mt,"/login"),content:"Zaloguj",name:"Login"}];n(67);s.b.defaultProps={className:"navBar-item"};var vt="visible",ht="invisible",wt="horizontalNav",gt="dropdownNav",bt="navBar-activeItem",Rt="navBar-wrapper-animation",Et="navBar-menuIcon-animation",kt=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).setLoginBtnText=function(){return d("userId")?"Wyloguj":"Zaloguj"},a.handleWindowResize=function(){var e=gt,t=ht,n=wt;B(window.innerWidth,660)?a.setState({dropdown:!1},(function(){x(a.wrapperRef.current,[e,t],[n])})):a.setState({dropdown:!0,expanded:!1},(function(){x(a.wrapperRef.current,[n],[e])}))},a.setActiveNavTab=function(){var e=bt,t=Array.from(a.wrapperRef.current.children),n=t.find((function(e){return F(e.hash,"#".concat(a.state.currentPathName))}));t.forEach((function(t){return j(t,e)})),n&&S(n,e)},a.handleIconClick=function(){var e=vt,t=ht,n=Rt,r=Et;a.state.expanded?(x(a.wrapperRef.current,[e],[t]),a.setState({expanded:!1})):(S(a.wrapperRef.current,[n]),S(a.iconWrapperRef.current,[r]),f((function(){j(a.wrapperRef.current,[n]),j(a.iconWrapperRef.current,[r])}),2e3),x(a.wrapperRef.current,[t],[e]),a.setState({expanded:!0}))},a.hideNavLinks=function(e){var t=vt,n=ht;e&&f((function(){a.setState({expanded:!1},(function(){x(a.wrapperRef.current,[t],[n])}))}),250)},a.hideNavLinksWrapperFunc=function(){return a.hideNavLinks(a.state.dropdown)},a.renderLinks=function(){return dt.map((function(e,t){var n=e.to,i=e.content,o=e.name;return F(o,"Login")&&(i=a.state.loginBtn),r.a.createElement(s.b,{key:t,to:n},i)}))},a.renderDropdownIcon=function(e){return e?r.a.createElement(w.a,{icon:g.b,onClick:a.handleIconClick}):r.a.createElement(w.a,{icon:g.a,onClick:a.handleIconClick})},a.renderDropdownNav=function(e){return a.renderHorizontalNav((function(){return a.renderDropdownIcon(e)}))},a.renderHorizontalNav=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return r.a.createElement("div",{className:"navBar-outerWrapper",ref:a.outerWrapperRef,tabIndex:"0"},r.a.createElement("div",{className:"iconWrapperRef",ref:a.iconWrapperRef},e()),r.a.createElement("div",{className:"navBar-wrapper",ref:a.wrapperRef},a.renderLinks()))},a.state={loginBtn:"",windowWidth:window.innerWidth,currentPathName:a.props.location.pathname,expanded:!1,dropdown:!!B(660,window.innerWidth)},a.inputRef=r.a.createRef(),a.iconWrapperRef=r.a.createRef(),a.wrapperRef=r.a.createRef(),a.outerWrapperRef=r.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=wt,t=gt;this.setState({loginBtn:this.setLoginBtnText()}),this.state.dropdown?x(this.wrapperRef.current,[e],[t]):x(this.wrapperRef.current,[t],[e]),window.addEventListener("resize",this.handleWindowResize),this.outerWrapperRef.current.addEventListener("blur",this.hideNavLinksWrapperFunc),this.setActiveNavTab()}},{key:"componentDidUpdate",value:function(){var e=this;this.setState({loginBtn:this.setLoginBtnText(),currentPathName:this.props.location.pathname},(function(){e.setActiveNavTab()}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize),this.outerWrapperRef.current.removeEventListener("blur",this.hideNavLinksWrapperFunc)}},{key:"render",value:function(){return this.state.dropdown?this.renderDropdownNav(this.state.expanded):this.renderHorizontalNav()}}]),n}(r.a.PureComponent),yt=Object(m.e)(kt),Nt=(n(68),function(){return r.a.createElement("div",{className:"item attribution"},r.a.createElement("a",{className:"item",href:"http://loading.io",target:"blank"},'the spinner "Ellipsis" is provided by loading.io'))}),St=function(e){var t=e.className;return e.cinemasList.map((function(e,n){var a=e.content;return r.a.createElement("div",{className:t,key:n},a)}))};St.defaultProps={className:"item"};var jt=St,xt=[{content:"Katowice"},{content:"Krak\xf3w"},{content:"\u0141\xf3d\u017a"},{content:"Pozna\u0144"},{content:"Sopot"},{content:"Warszawa"},{content:"Wroc\u0142aw"},{content:"Zgorzelec"}],It=function(){return r.a.createElement("div",{className:"item"},r.a.createElement("h2",null,"NASZE KINA"),r.a.createElement("div",{className:"ui list"},r.a.createElement(jt,{cinemasList:xt})))},Ot=function(){return r.a.createElement("div",{className:"item"},r.a.createElement("h2",null,"KONTAKT"),r.a.createElement("div",{className:"ui list"},r.a.createElement(s.b,{to:"".concat(mt,"/contact"),className:"item"},"Kontakt")))},Tt=function(e){var t=e.dataList;return r.a.createElement("div",{className:"item"},r.a.createElement("h2",null,"APLIKACJA MINIKINO"),r.a.createElement("div",{className:"ui list"},t.map((function(e,t){var n=e.className,a=e.src,i=e.alt;return r.a.createElement("div",{key:t,className:"item"},r.a.createElement("img",{className:n,src:a,alt:i}))}))))},Ct=[{className:"footer-app-and",src:"img/app-and.jpg",alt:"Android"},{className:"footer-app-ios",src:"img/app-mob.jpg",alt:"IOS"}],zt=(n(69),function(){return r.a.createElement("div",{className:"footer-outerWrapper"},r.a.createElement("div",{className:"footer-wrapper"},r.a.createElement(It,null),r.a.createElement(Tt,{dataList:Ct}),r.a.createElement(Ot,null)),r.a.createElement(Nt,null))}),Wt=(n(70),function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleAutoLogout=function(e){if(Date.now()>e)h();else{var t=f((function(){a.props.history.push("/autologout")}),e-Date.now());v("autoLogoutTimerId",t)}},a.handleAutoLogoutReminder=function(e){if(e&&Date.now()-3e5<e){var t=f((function(){a.setState({reminder:!0})}),e-Date.now()-3e5);v("autoLogoutReminderTimerId",t)}else e||a.setState({reminder:!1})},a.renderRouting=function(){return ft.map((function(e,t){var n=e.path,a=e.component,i=e.exact;return r.a.createElement(m.a,{key:t,path:n,exact:i,component:a})}))},a.renderAutoLogoutReminder=function(){if(a.state.reminder)return r.a.createElement(_,null)},a.state={reminder:!1},a.appWrapperRef=r.a.createRef(),a.mainContainerRef=r.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=d("expiresIn");e&&(this.handleAutoLogout(e),this.handleAutoLogoutReminder(e))}},{key:"componentDidUpdate",value:function(){var e=d("expiresIn");this.handleAutoLogoutReminder(e)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(yt,null),r.a.createElement("div",{className:"main-container",ref:this.mainContainerRef},this.renderRouting(),this.renderAutoLogoutReminder()),r.a.createElement(zt,null))}}]),n}(r.a.PureComponent)),Lt=Object(m.e)(Wt);o.a.render(r.a.createElement(s.a,null,r.a.createElement(Lt,null)),document.querySelector("#root"))}]),[[31,1,2]]]);
//# sourceMappingURL=main.d0b2038c.chunk.js.map